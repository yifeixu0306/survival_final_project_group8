---
title: "Survival Analysis_Final Project"
output: html_document
date: "2022-11-20"
---

```{r activate packages}
library(tidyverse)
library(dplyr)
library(survival)
library(ggplot2)
library(visR)
```



```{r setup, include=FALSE}
# Metadata Title
DATASET <- paste0("NCCTG Lung Cancer Dataset (from survival package ", 
                  packageVersion("survival"), ")")

# Save original options()
old <- options()  

# Global formatting options
options(digits = 3)

# Global ggplot settings
theme_set(theme_bw())

# Global table settings 
options(DT.options = list(pageLength = 10, 
                          language = list(search = 'Filter:'), 
                          scrollX = TRUE))

lung_cohort <- survival::lung

# Change gender to be a factor and rename some variables to make output look nicer
lung_cohort <- lung_cohort %>%  
  dplyr::mutate(sex = as.factor(ifelse(sex == 1, "Male", "Female")), ph.ecog = factor(ph.ecog))  %>%  
  dplyr::rename(Age = "age", Sex = "sex", Status = "status", ECOG = "ph.ecog", KarnoPH = "ph.karno", KarnoPAT = "pat.karno", Meal = "meal.cal")

# Restore original options()
options(old)
```


```{r pressure, echo=FALSE}
str(lung_cohort)

# Select variables of interest and change names to look nicer
lung_cohort_tab1 <- lung_cohort %>%  
  dplyr::select(Age, Sex, ECOG, KarnoPH, KarnoPAT) 

# Create a table one
tab1 <- visR::get_tableone(lung_cohort_tab1)

# Render the tableone
visR::render(tab1, title = "Overview over Lung Cancer patients", datasource = DATASET)
visR::tableone(lung_cohort_tab1, title = "Overview over Lung Cancer patients", datasource = DATASET)

# Render the 
```


